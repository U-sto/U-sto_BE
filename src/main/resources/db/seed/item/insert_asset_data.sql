/*******************************************************************************
 * 운용 대장 및 상태 이력 테스트용 데이터 (SEED DATA)
 *******************************************************************************
 * 1. TB_ITEM002M (물품대장기본) - 취득 승인된 헤더 정보
 * 2. TB_ITEM002D (물품대장상세) - 개별 물품 고유 번호 부여된 상세
 * 3. TB_ITEM006M (물품상태이력) - ACQ -> OPER 상태 변경 이력
 *******************************************************************************/

-- 1. 기존 데이터 초기화
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE `TB_ITEM002M`;
TRUNCATE TABLE `TB_ITEM002D`;
TRUNCATE TABLE `TB_ITEM006M`;
SET FOREIGN_KEY_CHECKS = 1;

-- 2. 임의로 취득 ID 설정 (001M의 APPROVED 데이터와 연결하기 위함)
SET @ACQ_ID_ERICA = UNHEX('11111111111111111111111111111111'); -- ERICA 기증 건
SET @ACQ_ID_SEOUL = UNHEX('22222222222222222222222222222222'); -- SEOUL 구매 건

-- -----------------------------------------------------------------------------
-- [ERICA 캠퍼스] 관재팀: 장갑 기증 건 (50개 중 일부 샘플링)
-- -----------------------------------------------------------------------------

-- 대장 기본 (002M)
INSERT INTO `TB_ITEM002M` (ACQ_ID, G2B_D_CD, QTY, ACQ_AT, ARRG_AT, ORG_CD, ACQ_ARRG_TY, CRE_BY)
VALUES (@ACQ_ID_ERICA, '25241236', 50, '2026-01-10', '2026-01-13', '7008277', 'DONATE', 'dev-user');

-- 대장 상세 (002D) - 50개 중 3개만 샘플링
INSERT INTO `TB_ITEM002D` (ITM_NO, ACQ_ID, G2B_D_CD, DEPT_CD, OPER_STS, ACQ_UPR, DRB_YR, RMK, ORG_CD, CRE_BY)
VALUES
    ('M202600001', @ACQ_ID_ERICA, '25241236', 'A350', 'OPER', 255, '3', '소방본부 기증품-1', '7008277', 'dev-user'),
    ('M202600002', @ACQ_ID_ERICA, '25241236', 'A350', 'OPER', 255, '3', '소방본부 기증품-2', '7008277', 'dev-user'),
    ('M202600003', @ACQ_ID_ERICA, '25241236', 'NONE', 'RTN',  255, '3', '기증품(반납테스트용)', '7008277', 'dev-user');

-- -----------------------------------------------------------------------------
-- [SEOUL 캠퍼스] 연구정보팀: 워크스테이션 구매 건 (3개 전체)
-- -----------------------------------------------------------------------------

-- 대장 기본 (002M)
INSERT INTO `TB_ITEM002M` (ACQ_ID, G2B_D_CD, QTY, ACQ_AT, ARRG_AT, ORG_CD, ACQ_ARRG_TY, CRE_BY)
VALUES (@ACQ_ID_SEOUL, '24120278', 3, '2026-01-12', '2026-01-13', '7002282', 'BUY', 'dev-user');

-- 대장 상세 (002D)
INSERT INTO `TB_ITEM002D` (ITM_NO, ACQ_ID, G2B_D_CD, DEPT_CD, OPER_STS, ACQ_UPR, DRB_YR, RMK, ORG_CD, CRE_BY)
VALUES
    ('M202600001', @ACQ_ID_SEOUL, '24120278', 'B103', 'OPER', 1320000, '5', '연구용 장비-A', '7002282', 'dev-user'),
    ('M202600002', @ACQ_ID_SEOUL, '24120278', 'B103', 'OPER', 1320000, '5', '연구용 장비-B', '7002282', 'dev-user'),
    ('M202600003', @ACQ_ID_SEOUL, '24120278', 'NONE', 'DSU',  1320000, '5', '불용테스트용', '7002282', 'dev-user');


-- -----------------------------------------------------------------------------
-- [상태 변경 이력] TB_ITEM006M (가상 이력 생성)
-- -----------------------------------------------------------------------------

INSERT INTO `TB_ITEM006M` (ITEM_HIS_ID, ITM_NO, PREV_STS, NEW_STS, CHG_RSN, REQ_USR_ID, REQ_AT, APPR_USR_ID, APPR_AT, ORG_CD, CRE_BY)
VALUES
-- 1. 기증품 1번: 운용 (자동 승인 시점)
(UNHEX(REPLACE(UUID(), '-', '')), 'M202600001', 'NONE', 'OPER', '최초 취득 승인에 따른 자산 등록', 'dev-user', '2026-01-13', 'admin', '2026-01-13', '7008277', 'system'),

-- 2. 기증품 3번: 운용 -> 반납 (사용자가 반납 신청)
(UNHEX(REPLACE(UUID(), '-', '')), 'M202600003', 'OPER', 'RTN', '프로젝트 종료로 인한 기기 반납', 'dev-user', '2026-01-20', 'admin', '2026-01-21', '7008277', 'system'),

-- 3. 워크스테이션 6번: 운용 -> 불용 (고장으로 인한 불용)
(UNHEX(REPLACE(UUID(), '-', '')), 'M202600006', 'OPER', 'DSU', '메인보드 고장으로 인한 수리 불가 판정', 'dev-user', '2026-01-21', 'admin', '2026-01-22', '7002282', 'system');